create view v_reservas_hoy as  select `r`.`idReserva` AS `idReserva`,concat_ws(' ',`pe`.`nombre`,`pe`.`apellido`) AS `EMPLEADO`,concat_ws(' ',`pc`.`nombre`,`pc`.`apellido`) AS `CLIENTE`,`t`.`nombreturno` AS `nombreturno`,`rm`.`fecha` AS `fecha`,`rm`.`hora_inicio` AS `hora_inicio`,`rm`.`hora_fin` AS `hora_fin`,`rm`.`fk_idmesa` AS `mesa`,`r`.`nComensales` AS `nComensales`,`es`.`nomestado` AS `nomestado` from (((((((`somnode`.`reservas` `r` join `somnode`.`rservaxmesa` `rm` on(`rm`.`fk_idReserva` = `r`.`idReserva`)) join `somnode`.`empleados` `e` on(`e`.`idEmpleado` = `r`.`fk_idEmpleado`)) join `somnode`.`clientes` `c` on(`c`.`idcliente` = `r`.`fk_codCliente`)) join `somnode`.`personas` `pe` on(`pe`.`dni` = `e`.`fk_dni`)) join `somnode`.`personas` `pc` on(`pc`.`dni` = `c`.`fk_dni`)) join `somnode`.`turnos` `t` on(`t`.`idturno` = `r`.`fk_idturno`)) join `somnode`.`estados` `es` on(`es`.`idestados` = `r`.`fk_idestados`)) where `rm`.`fecha` = curdate() order by `r`.`idReserva`;

create view v_reservas_ahora as
select `r`.`idReserva` AS `idReserva`,concat_ws(' ',`pe`.`nombre`,`pe`.`apellido`) AS `EMPLEADO`,concat_ws(' ',`pc`.`nombre`,`pc`.`apellido`) AS `CLIENTE`,`t`.`nombreturno` AS `nombreturno`,`rm`.`fecha` AS `fecha`,`rm`.`hora_inicio` AS `hora_inicio`,`rm`.`hora_fin` AS `hora_fin`,`rm`.`fk_idmesa` AS `mesa`,`r`.`nComensales` AS `nComensales`,`es`.`nomestado` AS `nomestado` from (((((((`somnode`.`reservas` `r` join `somnode`.`rservaxmesa` `rm` on(`rm`.`fk_idReserva` = `r`.`idReserva`)) join `somnode`.`empleados` `e` on(`e`.`idEmpleado` = `r`.`fk_idEmpleado`)) join `somnode`.`clientes` `c` on(`c`.`idcliente` = `r`.`fk_codCliente`)) join `somnode`.`personas` `pe` on(`pe`.`dni` = `e`.`fk_dni`)) join `somnode`.`personas` `pc` on(`pc`.`dni` = `c`.`fk_dni`)) join `somnode`.`turnos` `t` on(`t`.`idturno` = `r`.`fk_idturno`)) join `somnode`.`estados` `es` on(`es`.`idestados` = `r`.`fk_idestados`)) where `rm`.`hora_inicio` < curtime() and `rm`.`hora_fin` > curtime() and `rm`.`fecha` = curdate() order by `r`.`idReserva`